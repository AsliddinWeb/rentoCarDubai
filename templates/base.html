{% load static %}

<!DOCTYPE html>
<html lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    {% block title %}
    {% endblock title %}

    {% block custom_css %}
    {% endblock custom_css %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Preloader -->
    <div class="preloader-bg"></div>

    <div id="preloader">
        <div id="preloader-status">
            <div class="preloader-position loader"> <span></span> </div>
        </div>
    </div>
    <!-- Progress scroll totop -->
    <div class="progress-wrap cursor-pointer">
        <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <!-- Logo -->
            <div class="logo-wrapper">
                <a class="logo" href="/"> <img src="{{ site_settings.header_logo.url }}" class="logo-img" alt=""> </a>
            </div>
            <!-- Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"><i class="fa-solid fa-bars"></i></span> </button>
            <!-- Menu -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                    <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="/car-types" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">Car Types <i class="ti-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/car-types" class="dropdown-item">
                                    <span>All Car types</span>
                                </a>
                            </li>
                            {% for car_type in car_types %}
                                <li>
                                    <a href="{% url 'car_type_cars_page' pk=car_type.id %}" class="dropdown-item">
                                        <span>{{ car_type.title }}</span>
                                    </a>
                                </li>
                            {% endfor %}

                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/cars">Cars</a></li>
                    <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="/brands" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">Top Brands <i class="ti-angle-down"></i></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/brands" class="dropdown-item">
                                    <span>All Car brands</span>
                                </a>
                            </li>
                            {% for car_brand in car_brands %}
                                <li>
                                    <a href="{% url 'brand_cars_page' pk=car_brand.id %}" class="dropdown-item">
                                        <span>{{ car_brand.title }}</span>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/news">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="/contact">Contact</a></li>
                </ul>
                <div class="navbar-right">
                    <div class="wrap">
                        <div class="icon"> <i class="flaticon-phone-call"></i> </div>
                        <div class="text">
                            <p>Need help?</p>
                            <h5><a href="tel:{{ site_settings.phone_number }}">{{ site_settings.phone_number }}</a></h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    {% block content %}
    {% endblock content %}

    <!-- Lets Talk -->
    <section class="lets-talk bg-img bg-fixed section-padding" data-overlay-dark="5" data-background="{% static 'img/slider/3.jpg' %}">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h6>Rent Your Car</h6>
                    <h5>Interested in Renting?</h5>
                    <p>Don't hesitate and send us a message.</p> <a href="https://wa.me/{{ site_settings.whatsapp_phone }}" class="button-1 mt-15 mb-15 mr-10"><i class="fa-brands fa-whatsapp"></i> WhatsApp</a> <a data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo" href="#" class="button-2 mt-15 mb-15">Rent Now <span class="ti-arrow-top-right"></span></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Clients -->
    <section class="clients">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12">
                    <div class="owl-carousel owl-theme">
                        {% for car_brand in car_brands %}
                            <div class="clients-logo" style="text-align: center;">
                                <a href="{% url 'brand_cars_page' pk=car_brand.id %}"><img style="height: 81px;" src="{{ car_brand.image.url }}" alt=""></a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer clearfix">
        <div class="container">
            <!-- first footer -->
            <div class="first-footer">
                <div class="row">
                    <div class="col-md-12">
                        <div class="links dark footer-contact-links">
                            <div class="footer-contact-links-wrapper">
                                <div class="footer-contact-link-wrapper">
                                    <div class="image-wrapper footer-contact-link-icon">
                                        <div class="icon-footer"> <i class="flaticon-phone-call"></i> </div>
                                    </div>
                                    <div class="footer-contact-link-content">
                                        <h6>Call us</h6>
                                        <p>{{ site_settings.phone_number }}</p>
                                    </div>
                                </div>
                                <div class="footer-contact-links-divider"></div>
                                <div class="footer-contact-link-wrapper">
                                    <div class="image-wrapper footer-contact-link-icon">
                                        <div class="icon-footer"> <i class="omfi-envelope"></i> </div>
                                    </div>
                                    <div class="footer-contact-link-content">
                                        <h6>Write to us</h6>
                                        <p>{{ site_settings.email }}</p>
                                    </div>
                                </div>
                                <div class="footer-contact-links-divider"></div>
                                <div class="footer-contact-link-wrapper">
                                    <div class="image-wrapper footer-contact-link-icon">
                                        <div class="icon-footer"> <i class="omfi-location"></i> </div>
                                    </div>
                                    <div class="footer-contact-link-content">
                                        <h6>Address</h6>
                                        <p>{{ site_settings.address }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- second footer -->
            <div class="second-footer">
                <div class="row">
                    <!-- about & social icons -->
                    <div class="col-md-4 widget-area">
                        <div class="widget clearfix">
                            <div class="footer-logo"><img src="{{ site_settings.footer_logo.url }}" alt=""></div>

                            <div class="widget-text">
                                <p>{{ site_settings.footer_text }}</p>
                                <div class="social-icons">
                                    <ul class="list-inline">
                                        {% for social in social_networks %}
                                            <li>
                                                <a href="{{ social.link }}">
                                                    <i class="{{ social.icon }}"></i>
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- quick links -->
                    <div class="col-md-3 offset-md-1 widget-area">
                        <div class="widget clearfix usful-links">
                            <h3 class="widget-title">Quick Links</h3>
                            <ul>
                                <li><a href="/">Home</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/cars">Cars</a></li>
                                <li><a href="/car-types">Car Types</a></li>
                                <li><a href="/top-brands">Top Brands</a></li>
                                <li><a href="/news">News</a></li>
                                <li><a href="/contact">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- subscribe -->
                    <div class="col-md-4 widget-area">
                        <div class="widget clearfix">
                            <h3 class="widget-title">Subscribe</h3>
                            <p>Want to be notified about our services. Just sign up and we'll send you a notification by email.</p>
                            <div class="widget-newsletter">
                                <form action="/">
                                    <input type="email" placeholder="Email Address" required>
                                    <button type="submit"><i class="ti-arrow-top-right"></i></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- bottom footer -->
            <div class="bottom-footer-text">
                <div class="row copyright">
                    <div class="col-md-12">
                        <p class="mb-0">{{ site_settings.copyright_text|safe }}</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- RentNow Popup -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Booking Form</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="booking-box">
                        <div class="booking-inner clearfix">
                            <form id="bookingForm" method="post" action="{% url 'booking_create' %}" class="form1 clearfix">
                                {% csrf_token %}
                                <!-- form message -->
                                <div class="row">
                                    <div class="col-12">
                                        <div class="alert alert-success contact__msg" style="display: none" role="alert">Your message was sent successfully.</div>
                                    </div>
                                </div>
                                <!-- form elements -->
                                <div class="row">
                                    <div class="col-lg-6 col-md-12">
                                        <input name="name" type="text" placeholder="Full Name *" required>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <input name="email" type="email" placeholder="Email *" required>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <input name="phone" type="text" placeholder="Phone *" required>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <div class="select1_wrapper">
                                            <label>Choose Car Type</label>
                                            <div class="select1_inner">
                                                <select name="car_type" class="select2 select" style="width: 100%">
                                                    <option value="0" disabled>Choose Car Type</option>
                                                    {% for car_type in car_types %}
                                                        <option value="{{ car_type.title }}">{{ car_type.title }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <div class="select1_wrapper">
                                            <label>Pick Up Location</label>
                                            <div class="select1_inner">
                                                <select name="pick_up_location" class="select2 select" style="width: 100%">
                                                    <option value="0" disabled>Pick Up Location</option>
                                                    <option value="Dubai">Dubai</option>
                                                    <option value="Sharjah">Sharjah</option>
                                                    <option value="Abu Dhabi">Abu Dhabi</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <div class="input1_wrapper">
                                            <label>Pick Up Date</label>
                                            <div class="input1_inner">
                                                <input name="pick_up_date" type="text" class="form-control input datepicker" placeholder="Pick Up Date" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <div class="select1_wrapper">
                                            <label>Drop Off Location</label>
                                            <div class="select1_inner">
                                                <select name="drop_off_location" class="select2 select" style="width: 100%">
                                                    <option value="0" disabled>Drop Off Location</option>
                                                    <option value="Sharjah">Sharjah</option>
                                                    <option value="Abu Dhabi">Abu Dhabi</option>
                                                    <option value="Dubai">Dubai</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <div class="input1_wrapper">
                                            <label>Return Date</label>
                                            <div class="input1_inner">
                                                <input name="return_date" type="text" class="form-control input datepicker" placeholder="Return Date">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 form-group">
                                        <textarea name="message" id="message" cols="30" rows="4" placeholder="Additional Note"></textarea>
                                    </div>
                                    <div class="col-lg-12 col-md-12">
                                        <button type="submit" class="booking-button mt-15">Rent Now</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    {% block custom_js %}
    {% endblock custom_js %}
    <script src="{% static 'js/datepicker.js' %}"></script>
    <script>
        $('.datepicker').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
        });
    </script>
    <script>
    // Handle form submission via AJAX
    $('#bookingForm').on('submit', function(e) {
        e.preventDefault(); // Prevent form from submitting normally

        // Send form data via AJAX
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),  // Serialize the form data
            success: function(response) {
                // Show success message
                $('.contact__msg').show();

                // Clear the form
                $('#bookingForm')[0].reset();

                // Close the modal after 3 seconds
                setTimeout(function() {
                    $('#exampleModal').modal('hide');
                }, 3000);
            },
            error: function() {
                alert("There was an error submitting the form. Please try again.");
            }
        });
    });
</script>


</body>
</html>
